\chapter{The Development Environment}

In order to develop on a personal computer, must certain steps be performed in various systems, as well as various programs installed and configured. In this chapter these items will be discussed.

\section{Local Web Server Installation and Configuration}

In order for a locally developed project to be deployed, and to guarantee access to all required components a web server must be installed locally. 

\subsection{XAMPP}

In the iCampus web development group we use XAMPP from Apache Friends for our local web servers. Apache Friends describes XAMPP as follows:

\begin{quote}
	\textit{XAMPP is a completely free, easy to install Apache distribution containing MySQL, PHP, and Perl. The XAMPP open source package has been set up to be incredibly easy to install and to use.}\footnote{\url{https://www.apachefriends.org/index.html} September 19, 2014}
\end{quote}

\noindent
As per the description the distributions of XAMPP available from \href{https://www.apachefriends.org/index.html}{Apache Friends} come included with various useful tools which are also used within iCampus, such as PHP (server-side scripting language)abd MySQL (database management system), as well as many other tools which are optional for iCampus such as FileZilla (FTP Server) and Mercury (Mail Server).\\
\\
Download and install the latest XAMPP installation. Keeping in mind that at least MySQL and phpMyAdmin need to be installed to function in the iCampus environment.

\begin{figure}[h] 
	\centering
	\includegraphics[width=6cm]{xampp.png}
	\caption{XAMPP Minimum Installation}
\end{figure}

\newpage
\subsection{PHP Configuration}
\label{subsec:phpconfig}

The next step is the configuration of PHP for error reporting using xdebug. To do this open your php.ini file using the XAMPP control panel or the file explorer. This file is typically located at \url{C:/xampp/php/php.ini}.\\

\begin{figure}[h] 
	\centering
	\includegraphics[width=6cm]{openphpini.png}
	\caption{XAMPP Control Panel}
	\label{fig:xamppcontrolpanel}
\end{figure}

The following modifications should then be made to the file:\\
\\

\begin{tabular}{l}
	// Reports all PHP Errors, Warnings, and Breaches of PHP Standards\\
	\texttt{error\_reporting = E\_ALL | E\_STRICT}\\\\
	
	// Turns off error buffering =$>$ errors reported immediately, necessary for the debugger\\
	\texttt{output\_buffering = Off} \\\\
\end{tabular}

\label{xdebug_config}
\begin{tabular}{l}
	// Debugger Settings (may only need to be commented in)\\
	\texttt{[XDebug]} \\
	\texttt{zend\_extension="C:\textbackslash xampp\textbackslash php\textbackslash ext\textbackslash php\_xdebug.dll"}\\
	\texttt{xdebug.remote\_enable=true}\\
	\texttt{xdebug.remote\_host=localhost}\\
	\texttt{xdebug.remote\_port=9000}\\
	\texttt{xdebug.remote\_handler=dbgp}\\
	\texttt{xdebug.profiler\_enable=1}\\
	\texttt{xdebug.profiler\_output\_dir="C:\textbackslash xampp\textbackslash tmp"}\\\\
\end{tabular}

If you have trouble to get XDebug to work, this page (\url{https://xdebug.org/wizard.php}) might help you. You have to copy your whole phpinfo()-page (\url{http://localhost/dashboard/phpinfo.php}) and paste it into the textarea on the xdebug-wizard page. Follow the instructions and you should be ready to use xdebug.

\noindent
The interface shown in Figure \ref{fig:xamppcontrolpanel} above will also later used to start and stop the server service itself, Apache, as well as the the supporting database management service, MySQL, by pressing the corresponding ``Start"/``Stop" button.

\newpage
\subsection{PHPUnit}
The following text describes the installation of PHPUnit.\footnote{For the original documentation see \url{https://phpunit.de/manual/current/en/installation.html}}

\subsubsection{For Linux Users}
\begin{tabular}{l}
	\texttt{wget https://phar.phpunit.de/phpunit.phar}\\
	\texttt{chmod +x phpunit.phar}\\
	\texttt{sudo mv phpunit.phar /usr/local/bin/phpunit}\\
\end{tabular}\\

\subsubsection{For Windows Users}
\begin{enumerate}
	\item Create a directory for PHP binaries; e.g., \texttt{C:\textbackslash bin}.
	\item Add your PHP directory \texttt{C:\textbackslash xampp\textbackslash php} and the above created directory to your system's PATH environment variable. See appendix \ref{app:change_env_var}.
	\item Download \url{https://phar.phpunit.de/phpunit.phar} and save the file as C:\textbackslash bin\textbackslash phpunit.phar
	\item Open a command line (e.g., press Windows+R $ > $ type cmd $ > $ ENTER)
	\item Create a wrapping batch script (results in C:\textbackslash bin\textbackslash phpunit.cmd):\\
	
		\begin{tabular}{l}
			\texttt{C:\textbackslash Users\textbackslash username> cd C:\textbackslash bin}\\
			\texttt{C:\textbackslash bin> echo @php "\%\raisebox{-0.9ex}{\textasciitilde}dp0phpunit.phar" \%* > phpunit.cmd}\\
		\end{tabular}\\
\end{enumerate}
Open a new command line and confirm that you can execute PHPUnit from any path and it is the right PHPUnit version you installed previous:\\

\begin{tabular}{l}
	\texttt{> phpunit --version}\\
	\texttt{> PHPUnit x.y.z by Sebastian Bergmann.}
\end{tabular}\\
\newpage


\section{Git}

For repository and versioning iCampus uses Git. To this end Git must first be downloaded from \href{http://git-scm.com/downloads}{Git}, installed and configured.

\subsection{Installation}

\subsubsection{Command Context}
Part of the configuration is deciding which context you would like to be able to use Git in. In iCampus the second is used because it allows the developer later to use PHPStorm's own terminal to execute Git's commands, which eliminates the necessity for navigation to projects in Git Bash or Windows shell. More on PHPStorm in Section \ref{sec:PHP-Storm}.\\

\begin{figure}[h] 
	\centering
	\includegraphics[width=6cm]{gitbash1.jpg}
	\caption{Command Context}
\end{figure}

\subsubsection{Line Endings}

The next screen lets one decide how file endings are pulled and committed. The iCampus Coding standards demand the Unix-style line endings. To this end only the second option is sufficient, because once style checking is enabled in your IDE the first and third options will, dependent on your system settings, report every single line of code as a breach of style, which removes any transparency whatsoever when searching for other errors.\\

\begin{figure}[h] 
	\centering
	\includegraphics[width=6cm]{gitbash2.jpg}
	\caption{Line Endings}
\end{figure}

\subsection{User Configuration}

In order to take part in the development process you must take several steps to configure your user account.

\subsubsection{Global User Configuration}
In Git Bash the global user name and email must be set so that repository actions can be associated with a user.\\
\\
Start Git Bash and enter the following commands, replacing $<$First Name$>$, $<$Last Name$>$, and $<$Department$>$ with your first and last names and the abbreviation of the department in which you are matriculated.\\
\\
\begin{tabular}{l}
	\texttt{git config --global user.name "$<$First Name$>$ $<$Last Name$>$"}\\
	\texttt{git config --global user.email "$<$First Name$>$.$<$Last Name$>$@$<$Department$>$.thm.de"}\\
\end{tabular}\\
\\
You can confirm that the entries were saved correctly by entering the following command and comparing the associated values.\\
\\
\begin{tabular}{l}
	\texttt{git config -l}
\end{tabular}

\subsubsection{SSH-Key Creation}

After the user configuration is completed, an SSH-Key can be created using the following command in Git Bash.\\
\\ 
\texttt{ssh-keygen}\\
\\
The first question determines where the generated key will be saved and what its name will be. Per default this will be \textbf{\texttt{C:/Users/$<$Windows Account Name$>$/.ssh/id\_rsa}}. This directory is important for the next steps, as well as later when repositories are cloned. Press enter to confirm the default.
The next two questions will be to enter and confirm your password. You can also elect to have no password by pressing enter in answer to both questions.

\section{PhpStorm}
\label{sec:PHP-Storm}

PhpStorm is the IDE used in iCampus. While others are allowed the use of a single IDE in the working group allows for the exchange of information and tips on how to get the most out of a single IDE. This makes everyone more productive and allows for a collaborative effort to solve any problems which may be IDE related.\\
\\
PhpStorm was chosen for its ease of use and integration of many tools which simplify development, including CodeSniffer, database connection tools, SASS support, Git support, and many others. PhpStorm can be downloaded from the \href{http://www.jetbrains.com/phpstorm/}{JetBrains Website}.

\subsection{Installation}
During the installation process you will be asked which file extensions should be associated with PhpStorm. As we use PhpStorm for the development with all given extensions, all can be selected. As of PhpStorm 8 this also allows for the editing of single files without the creation of a project.

\begin{figure}[h] 
	\centering
	\vspace{3pt}
	\includegraphics[width=5cm]{file-associations.png}
	\caption{File Associations}
\end{figure}

\noindent
For the most part the rest of the installation requires nothing special, however at the end you will be asked to chose between several themes and coloring/font style options. As this interface offers no preview it is best to go with the default settings. These selections can later be changed while running the PhpStorm which will actually show you what effects your selection has on its appearance.\\
\\
After the installation starting PhpStorm will request the lisence information. Please register at \url{https://www.jetbrains.com/shop/eform/students} as a student. After this procedure you can activate PhpStorm using your JetBrains account.

\begin{figure}[h]
	\centering
	\vspace{3pt}
	\includegraphics[width=4.5cm]{phpstorm-activation.png}
	\caption{PhpStorm License Activation}
\end{figure}

\newpage

\subsection{Required Plugins}

Next we will need to install two plugins, Gerrit and Jenkins. Gerrit is a repository and code review system based on Git.\footnote{For  further information visit the Gerrit documentation page at \url{https://gerrit-review.googlesource.com/Documentation/intro-quick.html\#\_what\_is\_gerrit}} where Jenkins is a Continuous Integration (CI) tool which builds and tests projects.\footnote{For  further information visit the Jenkins documentation page at \url{https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins}}\\
\\
To do so we must first navigate to the plugins view. Open the PhpStorm plugin store by clicking \texttt{Configure} and then \texttt{Plugins} on the next screen. This can later be accessed through the menu under \texttt{File} $\Rightarrow$ \texttt{Settings} $\Rightarrow$ \texttt{Plugins} (under \texttt{IDE Settings}). The installation steps are also depicted below in Figures \ref{fig:ws-plugin-installation} and \ref{fig:project-plugin-installation}.\\

\begin{figure}[h]
	\centering
	\begin{subfigure}{.5\textwidth}
		\centering
		\includegraphics[width=.4\linewidth]{configurePhpStorm}
		\caption{Configure}
		\label{fig:configurePhpStorm}
	\end{subfigure}%
	\begin{subfigure}{.5\textwidth}
		\centering
		\includegraphics[width=.4\linewidth]{plugins}
		\caption{Plugins}
		\label{fig:plugins}
	\end{subfigure}
	\caption{Welcome Screen Plugin Installation}
	\label{fig:ws-plugin-installation}
\end{figure}

\begin{figure}[h]
	\centering
	\begin{subfigure}{.5\textwidth}
		\centering
		\includegraphics[width=.4\linewidth]{phpStormProjectSettings}
		\caption{Settings}
		\label{fig:phpStormProjectSettings}
	\end{subfigure}%
	\begin{subfigure}{.5\textwidth}
		\centering
		\includegraphics[width=.4\linewidth]{phpStormSettingsPlugins}
		\caption{Plugins}
		\label{fig:plugins}
	\end{subfigure}
	\caption{Project Plugin Installation}
	\label{fig:project-plugin-installation}
\end{figure}

\newpage

\noindent
Then we need to access the plugin store to find yet uninstalled plugins To do so click \texttt{Browse repositories...}.

\begin{figure}[h]
	\centering
	\includegraphics[width=.6\linewidth]{phpStormPluginStore}
	\caption{Browse Repositories}
	\label{fig:browse-plugin-repositories}
\end{figure}

\noindent
Once the plugin store is open enter ``Gerrit" in the search to find the appropriate plugin. Then click on the green \texttt{Install plugin} button, or use the item's context menu and click \texttt{Download and Install}.

\begin{figure}[h]
	\centering
	\includegraphics[width=.4\linewidth]{downloadGerritPlugin}
	\caption{Gerrit Installation}
	\label{fig:intall-gerrit-plugin}
\end{figure}

\noindent
You will then be prompted to restart PhpStorm to enable the plugin. \textbf{Do not restart yet}. Instead search the store for the Jenkins plugin in the same way as we just searched for Gerrit and install it. Now perform the restart.

\newpage

\subsection{Gerrit Configuration}

Visit our Gerrit repository located at \url{http://gerrit.mni.thm.de/gerrit}. In the upper right corner is a link to \texttt{Sign In} to the server. Use your THM user credentials to log in.

\begin{figure}[h]
	\centering
	\includegraphics[width=.8\linewidth]{gerritSignIn}
	\caption{Gerrit Sign In}
	\label{fig:gerrit-sign-in}
\end{figure}

\noindent
After signing in you need to create a HTTP password for yourself. Your name should be shown in the same position where \texttt{Sign In} stood before. Next to it is a small black arrow pointing down. Clicking this arrow opens a small window. Click \texttt{Settings}. This opens your account settings. Click \texttt{HTTP Password} then \texttt{Generate Password} in the view which opens. This generates the password in the field above the button. Copy this manually or use the button to the right of the field. This password can be viewed at anytime by navigating to the \texttt{HTTP Password} settings item.

\begin{figure}[h]
	\centering
	\includegraphics[width=.8\linewidth]{gerritServerHTTPPassword}
	\caption{Gerrit HTTP Password Generation}
	\label{fig:gerrit-password-creation}
\end{figure}

\noindent
Next we will checkout a project using the Gerrit plugin. Click \texttt{Checkout from Version Control} and then select Gerrit from the window which opens.

\begin{figure}[h] 
	\centering
	\includegraphics[width=6cm]{new-gerrit-project.png}
	\caption{Check out a Gerrit Project}
\end{figure}

\noindent
After making the selection the system will ask you to set a master password. \textbf{Leave these fields blank}. Setting a password will cause you to have to enter a it every time you perform writing repository actions. (This can later be changed.) After this you will then be prompted to enter the connection information for Gerrit. This includes the ``URL" (http://gerrit.mni.thm.de/gerrit), ``Login" (your THM username), and ``Password" (the HTTP Password generated). 

\begin{figure}[h] 
	\centering
	\includegraphics[width=6cm]{phpstorm-gerrit-password.png}
	\caption{Gerrit Connection Setup}
\end{figure}

\noindent
Should everything be correctly entered we can now checkout a project.


\subsection{THM Core Library}
\label{subsec:Core_library}
The project we will be checking out is the THM Core Library (\texttt{lib\_thm\_core}). The THM Core Library carries with it many useful functions helpful in developing Joomla! extensions as well as documentation (including this document), styles, coding standards and much more.\\
\\
For the ``Git Repository Url" select \texttt{http://gerrit.mni.thm.de/gerrit/lib\_thm\_core}. After this PhpStorm may complain that the PhpstormProjects directory does not exist. Either create the default ``PhpStormProjects" at the location shown or chose a different one into which this (and your future projects if you so chose) will be saved.

\begin{figure}[h] 
	\centering
	\vspace{3pt}
	\includegraphics[width=5cm]{clone-repository.png}
	\caption{Clone Repository}
\end{figure}

\subsection{Tool Window Activation}
\label{subsec:Tool-window-activation}

For quick access to the Gerrit and Jenkins plugins it is helpful to add their tool windows to the PhpStorm displays. To do so click on \texttt{View} $\rightarrow$ \texttt{Tool Windows} and then click on \texttt{Gerrit} and \texttt{Jenkins} in turn.

\begin{figure}[h] 
	\centering
	\vspace{3pt}
	\includegraphics[width=5cm]{tool-window-activation}
	\caption{Tool Window Activation}
\end{figure}

\noindent
This will add icons with text to the borders of the PhpStorm window. Clicking these opens the corresponding tool windows.

\subsection{Deployment - Mapping}
This section will describe how to configure deployments in PHPStorm. So the files and folder will be automatically synced between your project folder and Joomla instance.
\begin{itemize}
	\item \texttt{Step 1}: External Libraries $->$ right-click  $->$ Configure Php Include Paths
	
	Alternatively : F4 key
	\begin{figure}[H] 
		\centering
		\includegraphics[width=4.3cm]{include_joomla}
		\caption{Configure external libraries}
	\end{figure}
	\item \texttt{Step 2}: Click on the green plus icon.
	\begin{figure}[H] 
		\centering
		\vspace{3pt}
		\includegraphics[width=6.5cm]{include_joomla_2}
		\caption{Add a Joomla instance}
	\end{figure}
	\item \texttt{Step 3}: Choose the path to your Joomla instance.
	\begin{figure}[H] 
		\centering
		\vspace{3pt}
		\includegraphics[width=6cm]{include_joomla_3}
		\caption{Choose the path to your local Joomla instance}
	\end{figure}
	\item \texttt{Step 4}: File $->$ Settings
	\begin{figure}[H] 
		\centering
		\vspace{3pt}
		\includegraphics[width=4cm]{deployment}
		\caption{Deployment}
	\end{figure}
	\item \texttt{Step 5}: Deployment $->$ "Add", choose "Local or mountend folder" as Type and give a meaningful name like "localhost"
	\begin{figure}[H] 
		\centering
		\vspace{3pt}
		\includegraphics[width=5cm]{deployment_2}
		\caption{Open the PHPStorm settings}
	\end{figure}
	\item \texttt{Step 6}: Folder = Path to your Joomla instance
						   Web-server root Url : self-explanatory
	
	\begin{figure}[H] 
		\centering
		\vspace{3pt}
		\includegraphics[width=5cm]{deployment_3}
		\caption{Add a new deployment}
	\end{figure}
	\item \texttt{Step 7}: Local Path : Path to your local folder
	e.g.: home/user/PhpStormProjects/com\_<componentname>/site
	
	Deployment Path : Path to the specific folder in your Joomla instance
    e.g.: /components/com\_<componentname>
	
	By clicking on "add another mapping" you can add more mappings.
	Repeat the same steps for the other folders. ( Folder "admin" etc.).
	
	\textbf{Please notice}: You cannot upload the same folder (or subfolders) to different sites at once. A separate deployment configuration has to be created for each of them and uploaded to each site one by one.
	\begin{figure}[H] 
		\centering
		\vspace{3pt}
		\includegraphics[width=5cm]{deployment_4}
		\caption{Add new mappings}
	\end{figure}
	\item \texttt{Step 8}: Set the newly created deployment as your default deployment.
	\begin{figure}[H] 
		\centering
		\vspace{3pt}
		\includegraphics[width=5cm]{deployment_5}
		\caption{Set deployment as default}
	\end{figure}
	\item \texttt{Step 9}: Set the sync options.
	\begin{figure}[H] 
		\centering
		\vspace{3pt}
		\includegraphics[width=5cm]{deployment_6}
		\caption{Set the sync options}
	\end{figure}
\end{itemize}

\section{Code Sniffer and Mess Detector}
\label{sec:qatools}

Now that we have checked out \texttt{lib\_thm\_core}, we can use the coding standards within it to set up PHP CodeSniffer.

\begin{quote}
	PHP\_CodeSniffer is a PHP5 script that tokenises and ``sniffs" PHP, JavaScript and CSS files to detect violations of a defined coding standard. It is an essential development tool that ensures your code remains clean and consistent. It can also help prevent some common semantic errors made by developers.\footnote{\url{http://pear.php.net/manual/en/package.php.php-codesniffer.intro.php} Stand September 22, 2014}
\end{quote}

\noindent
PHP Mess Detector on the other hand searches for problems more abstract and more serious such as\footnote{\url{http://phpmd.org/} Stand September 27, 2014}:

\begin{itemize}
	\item Possible bugs
	\item Suboptimal code
	\item Overcomplicated expressions
	\item Unused parameters, methods, properties
\end{itemize}

\subsubsection{Code Sniffer Installation}
To install Code Sniffer for Joomla, follow the instructions on this page
\url{https://docs.joomla.org/Joomla_CodeSniffer}.

\newpage

\subsection{Standards Directory Inclusion}

First we will create symbolic links from the Joomla and THMJoomla folders to the folder which holds the existing standards. Open the windows shell as administrator and enter the following in the form \texttt{Command Link Target}.\\
\\
\textbf{Joomla Standard}
\begin{description}
	\itemsep-10pt
	\item[Command] \texttt{mklink /d}\\
	\item[Link] \texttt{C:\textbackslash xampp\textbackslash php\textbackslash pear\textbackslash PHP\textbackslash CodeSniffer\textbackslash Standards\textbackslash Joomla}\\
	\item[Target] \texttt{C:\textbackslash $<$System Specific Path$>$\textbackslash lib\_thm\_core\textbackslash coding\_standards\textbackslash Joomla}\\
\end{description}

\noindent
\textbf{iCampus Standard}
\begin{description}
	\itemsep-10pt
	\item[Command] \texttt{mklink /d}\\
	\item[Link] \texttt{C:\textbackslash xampp\textbackslash php\textbackslash pear\textbackslash PHP\textbackslash CodeSniffer\textbackslash Standards\textbackslash THMJoomla}\\
	\item[Target] \texttt{C:\textbackslash $<$System Specific Path$>$\textbackslash lib\_thm\_core\textbackslash coding\_standards\textbackslash THMJoomla}\\
\end{description}

\subsection{PhpStorm}

In order for Code Sniffer and Mess Detector to perform in PhpStorm they must first be integrated. This can be set as part of the default settings, meaning the settings will be applied to all projects, or in the project settings, where they would only valid for a specific project. The steps are exactly the same, but the entry point is slightly different. First access the settings using the menu item \texttt{File} and then selecting either \texttt{Default Settings...} or \texttt{Settings...} from the drop down menu.

\subsubsection{PhpStorm Inclusion}

To activate Code Sniffer click on \texttt{Languages \& Frameworks}, \texttt{PHP} and then \texttt{Code Sniffer} or \texttt{Mess Detector}. In the text field next to ``PHP Code Sniffer (phpcs) path" enter the path to phpcs.bat. In the standard installation this will be \texttt{C:\textbackslash xampp\textbackslash php\textbackslash phpcs.bat}. After you have input the path, click on \texttt{Validate}. If the file is valid, the you will be shown a short text containing the version of the installed Code Sniffer. Although not specifically stated the steps for Mess Detector inclusion are completely analogous.\\
\\
\begin{figure}[h] 
	\centering
	\includegraphics[width=14cm]{codesnifferinclusion.png}
	\caption{Code Sniffer - PhpStorm Inclusion}
\end{figure}

\subsubsection{PhpStorm Configuration}

Next we need to add PHP\_CodeSniffer to the inspections performed. With the settings still open, click on \texttt{Editor} then on \texttt{Inspections}, then in the list to the right \texttt{PHP}, and finally on \texttt{PHP Code Sniffer validation} to open the configuration settings for Code Sniffer.\\
\\
\begin{figure}[h] 
	\centering
	\includegraphics[width=14cm]{codesnifferconfiguration.png}
	\caption{Code Sniffer - PhpStorm Configuration}
	\label{fig:cspsc}
\end{figure}

\noindent
To activate the inspection we must first set the checkbox next to \texttt{PHP Code Sniffer validation}. This activation enables the further settings to the right which we see numbered with one through four in Figure \ref{fig:cspsc}.

\begin{enumerate}
	\item \texttt{Inspection severity}:``indicates how seriously the code issues detected by the inspection impact the project and determines how the detected issues should be highlighted in the editor."\footnote{http://www.jetbrains.com/phpstorm/webhelp/configuring-inspection-severities.html Stand September 22, 2014}
	\item \texttt{Display severity}: defines how the infractions found are marked.
	\item \texttt{Refresh}: updates the list of available coding standards. Should the desired standard not be found in the folder defined in the section on symbolic links, you can also manually search for the standard on your file system.
	\item \texttt{Available standards}: a list of standards found. In iCampus we use the THM Joomla Standard which inherits or extends many of the definitions in the Joomla standard.
\end{enumerate}

\noindent
It is recommended that both inspection and display severity be set to errors to make the standard infractions more noticable. Settings take effect when the \texttt{Apply} button has been pressed.\\
\\
Inspection settings for Mess Detector are also analogous here, with the distinction that one need not select a standard, instead selecting which rule sets should be applied.

\newpage
\section{SASS}

In iCampus we strive to maintain a standardized appearance both within views of the same extension as well as between extensions developed by the iCampus Group as a whole. To this end we utilize SASS.

\begin{quote}
	Sass is an extension of CSS that adds power and elegance to the basic language. It allows you to use variables, nested rules, mixins, inline imports, and more, all with a fully CSS-compatible syntax. Sass helps keep large stylesheets well-organized, and get small stylesheets up and running quickly, particularly with the help of the Compass style library.\footnote{\url{http://sass-lang.com/documentation/file.SASS_REFERENCE.html} Stand 27 September, 2014}
\end{quote}

\noindent
The above mentioned variables, nested rules, mixins, and inline imports allow the centralization of style structures and recurring themes, while still allowing for individualized style elements as required.\\
\\
In iCampus we use the SCSS SASS syntax which closely resembles most .css you will have seen, and, stand alone, are actually valid CSS3 documents. This has as a consequence that our SASS files developed later will actually end with the extension .scss. For more information read \href{http://sass-lang.com/documentation/file.SASS_REFERENCE.html#syntax}{the SASS syntax explanation}.

\subsection{Installation}

Logically SASS must first be installed on the local system in order to function. This in turn requires the Ruby programming language, for which sass and compass are packages. While we need Ruby on the local system for SASS to function, we will not be using it to program, for this reason only the minimal requirements as pertain to SASS installation will be discussed.\\
\\
Ruby can be installed by visiting \href{http://www.rubyinstaller.org/downloads/}{the ruby installer downloads page} and choosing the download that best suits your operating systems needs, as described in the right hand column.\footnote{Stand 27 September, 2014}\\
\\
After you have downloaded and started the Ruby installation executable and accepted the license agreement you will be confronted with choices regarding the installation directory, support features, path variables, and file associations. We recommend using the default file path as it makes finding the installation easier, should any problems arise. You should only choose to install Td/Tk support if you know that you will be developing GUI applications in Ruby. The path variable is required in order for SASS to function. The association of .rb and .rbw files with this installation is recommended.

\begin{figure}[h] 
	\centering
	\includegraphics[width=5cm]{rubyinstallation.png}
	\caption{Ruby Installation}
	\label{fig:rubyinstallation}
\end{figure}

\noindent
After ruby is installed we can begin to install SASS itself. Open the command line tool cmd, and enter the following command: \texttt{gem install sass}. Installation completes without an explicit noticed but can be verified by entering: \texttt{sass -v}. The result should resemble the output of Figure \ref{fig:sassinstallation}.\\

\begin{figure}[h] 
	\centering
	\includegraphics[width=8cm]{sassinstallation.png}
	\caption{SASS Installation}
	\label{fig:sassinstallation}
\end{figure}

\noindent
Finally in order to extend the functionality of SASS, we install the Compass css authoring library package using the following command: \texttt{gem install compass}. Similar to SASS, no explicit message indicating the success of the installation is output, but can be verified with the command: \texttt{compass -v}.

\subsection{PhpStorm Configuration}

In iCampus our SASS infrastructure, or SCSS in our case, are stored at iCampus level in \texttt{lib\_thm\_core\textbackslash scss}, at project level in \texttt{$<$Project Name$>$\textbackslash \textbackslash scss}, and lastly the compiled CSS files are stored in \texttt{$<$Project Name$>$\textbackslash $<$Project Name$>$\textbackslash media\textbackslash css}.\\
\\
The iCampus level SCSS files ensure standardized styles accross extensions. The project level styles allow for variance between individual extensions as required. To ensure that these files are not installed with the extension itself and thereby unnecessarily taking up system space these files are stored at root level in the project's repository.\\
\\
Further complicating matters, SASS files are of two basic types, signified by the beginning of the file name. Templates are complete SASS files which are normally used to generate .css files, whereas partials contain reoccurring style information used by multiple style sheets. One of the many SASS conventions regards the naming of such files. Where templates have normal names, partials begin with a ``\_" to signify them as such.\\
\\
The configuration of the PhpStorm file watchers allows for all changes made to templates in the scss folder of the project to be compiled to the its css folder. Opening a template in PhpStorm will trigger a prompt asking if you would like to create a file watcher (Figure \ref{fig:watchernotification}).\\
\\

\begin{figure}[h] 
	\centering
	\includegraphics[width=10cm]{scsswatchernotification.png}
	\caption{File Watcher Notification}
	\label{fig:watchernotification}
\end{figure}

\noindent
To configure a file watcher either click on \texttt{Add watcher} in the notification, or navigate to \texttt{File} $>$ \texttt{Settings} then click on \texttt{File Watchers}, the \texttt{+} button on the right hand side of the interface, and finally on \texttt{SCSS} in the selection box that appears.\\
\\

\begin{figure}[h] 
	\centering
	\includegraphics[width=10cm]{settingsfilewatchers.png}
	\caption{Add a New SCSS File Watcher}
	\label{fig:addscssfilewatcher}
\end{figure}

\newpage

\noindent
This brings us to the watcher edit interface seen in Figure \ref{fig:watcheredit}. This will already have default values for all fields with the exception of \texttt{Program}. Fill out the fields as described below.\\


\begin{figure}[h] 
	\centering
	\includegraphics[width=16cm]{editwatcher-withoutMaps.png}
	\caption{Edit File Watcher}
	\label{fig:watcheredit}
\end{figure}

\begin{description}
	\item[Program:] \texttt{$<$Ruby Installation Path$>$\textbackslash bin\textbackslash scss.bat}
	\item[Arguments:] \texttt{--no-cache --update} \newline \texttt{\$FileName\$:\$FileParentDir\$/$<$Project Name$>$/media/css/\$FileNameWithoutExtension\$.css --sourcemap=none}
	\item[Output Paths:] \texttt{\$FileParentDir\$/$<$Project Name$>$/media/css/\$FileNameWithoutExtension\$.css}
\end{description}

\noindent
Upon completion click ``OK" to save the watcher. As necessary in the \texttt{Settings} interface put a check mark in the box in front of the watcher and click ``Apply" for your changes to take effect.

\newpage

\begin{quote}
	\emph{SASS version 3.4+ automatically generates $<$File Name$>$.css.map files when used as a plugin, as well as adds comments to the .css files which reference these. While this may at some point be used for debugging purposes, I would really like to turn it off. If anyone figures out how I would be very grateful. I could not get the method explained} \href{http://sass-lang.com/documentation/file.SASS\_CHANGELOG.html#341\_22_august\_2014}{here} \emph{to work.}
\end{quote}

\noindent
The inclusion of iCampus partials from \texttt{lib\_thm\_core} is done in the scss files themselves using \texttt{@import}. If your project repository is in the same directory as \texttt{lib\_thm\_core}, the imports would constructed as follows:\\
\\
\begin{tabular}{l}
	\texttt{@import '../../lib\_thm\_core/scss/$<$Partial Name without Underscore$>$';}
\end{tabular}

\begin{quote}
	\emph{Here I would welcome any help in being able to add the directory with the partials to the SCSS path. This would reduce the import to the name of the partial to be imported.}
\end{quote}

\newpage

\section{Joomla!}

Almost all software developed by iCampus is for use within the context of the Joomla! content management system (CMS) used by the Department of Mathematics, Natural and Informatics (MNI) at the Central Hessen University of Applied Science.

\begin{quote}
	Joomla is an award-winning content management system (CMS), which enables you to build Web sites and powerful online applications. Many aspects, including its ease-of-use and extensibility, have made Joomla the most popular Web site software available. Best of all, Joomla is an open source solution that is freely available to everyone.\footnote{\url{http://www.joomla.org/about-joomla.html} Stand 27 September, 2014}
\end{quote}

\noindent
As of September 2014 iCampus is slightly between worlds as concerns Joomla!. The department's website currently still uses Joomla! version 2.5.x whereas the current Joomla! version as of 27 September, 2014 is 3.3.4.\\
\\
For feature development and bugfixes for the department's website a dump of the site will be provided for you. Otherwise development should be performed in the context ofJoomla! 3.x which can be downloaded from \href{http://www.joomla.org/download.html}{the Joomla website}. If you didn't deviate from the standard XAMPP installation you will want to extract the ZIP-Archive to the \texttt{C:\textbackslash xampp\textbackslash htdocs} directory.\\ 
\\
At this point both the Apache and the MySQL services need to be running. To do so open the XAMPP control panel, Figure \ref{fig:xamppcontrolpanel}, and click the ``Start" button next to both of these services.

\subsection{Database Creation}

For either of the development instances to function we first need to create databases for them to store their data in. To do this enter \url{http://localhost/phpmyadmin} in the address bar of your browser. This will open up the home page for your phpMyAdmin tool.\\
\\
To create a database, click on the \texttt{Databases} tab,the interface for database management will then appear. The first item on the page will be ``Create Database" under which will be an option for ``Database name" and ``Collation". Enter a name for your database and select the collation \texttt{utf8\_general\_ci} and then click \texttt{Create}. Then repeat as necessary for any further databases.\\

\begin{figure}[h] 
	\centering
	\includegraphics[width=6cm]{databasecreation.png}
	\caption{Database Creation}
	\label{fig:databasecreation}
\end{figure}

\subsection{MNI Site Development}

First we will discuss the installation of the MNI backup. If you will only be developing for Joomla! 3.x you should skip ahead to the next subsection. First extract the backup and give it an URL-friendly name such as ``mni". Next place this folder in your web directory. If you followed the default installation steps this should be located at \texttt{C:\textbackslash xampp\textbackslash htdocs}.\\
\\
Open a browser of your choosing and enter \texttt{localhost/$<$Your MNI Backup Folder$>$} in the address bar. If you renamed the backup ``mni" this would then be \url{localhost/mni}. This will automatically start the Akeeba installer. The first page shown should look like Figure \ref{fig:akeebapreinstallation}. As illustrated in the figure, we deviate from the recommended settings in one point ``Display Errors", since we changed it in Subsection \ref{subsec:phpconfig}. Should your settings not match those displayed, reconfigure your PHP settings to do so.\\

\begin{figure}[h] 
	\centering
	\includegraphics[width=10cm]{akeeba1.png}
	\caption{Akeeba Pre-installation}
	\label{fig:akeebapreinstallation}
\end{figure}

\noindent
Click ``$\Rightarrow$ Next". This brings us to the database restoration page seen in Figure \ref{fig:akeebadatabaserestoration}.

\newpage

\begin{figure}[h] 
	\centering
	\includegraphics[width=10cm]{akeeba2.png}
	\caption{Akeeba Database Restoration}
	\label{fig:akeebadatabaserestoration}
\end{figure}

\noindent
Here use the following values:\\
\\
\begin{tabular}{l l}
	\texttt{Database type} & MySQL\\
	\texttt{Database server host name} & localhost\\
	\texttt{User name} & root\\
	\texttt{Password} & (empty, unless set)\\
	\texttt{Database name} & mni (unless named otherwise)\\
	\texttt{Maximum execution time} & 300\\\\
\end{tabular}

\noindent
Clicking ``$\Rightarrow$ Next" will trigger the restoration of the database. Then progress will then be displayed in a pop-up window. This may take up to several minutes dependent upon your computer. This brings us to the database restoration page seen in Figure \ref{fig:akeebasitesetup}.

\newpage

\begin{figure}[h] 
	\centering
	\includegraphics[width=10cm]{akeeba3.png}
	\caption{Akeeba Site Setup}
	\label{fig:akeebasitesetup}
\end{figure}

\noindent
Here you need to choose a \texttt{Super User}. The available options are the users which have super user access to the live web site. Here it is not important which user you chose, but rather that you remember which user you chose. Also important is setting a local \texttt{Password} for the chosen user, this prevents the system from validating against the data available to the CAS server. Set a new local  \texttt{Password} and repeat it in  \texttt{Password (repeat)}.\\
\\
When you click Clicking ``$\Rightarrow$ Next" you will be directed to the final confirmation page. Here you will be notified that you need to delete the \texttt{installation} directory to complete the installation. Do so by clicking on the blue button. You will then automatically be redirected to the site's frontend.

\subsection{Joomla! 3.x Development}

First abstract the archive file downloaded from \href{http://www.joomla.org/download.html}{the Joomla! website} and give it a URL friendly name such as ``j3". Next place this folder in your web directory. If you followed the default installation steps this should be located at \texttt{C:\textbackslash xampp\textbackslash htdocs}.\\
\\
Open a browser of your choosing and enter \texttt{localhost/$<$Your Joomla 3.x Folder$>$} in the address bar. If you renamed the backup ``j3" this would then be \url{localhost/j3}. This will open the main configuration page as seen in Figure \ref{fig:j3mainconfiguration}.

\newpage

\begin{figure}[h] 
	\centering
	\includegraphics[width=8cm]{j3mainconfiguration.png}
	\caption{Joomla Main Configuration}
	\label{fig:j3mainconfiguration}
\end{figure}

\noindent
Here you will need to enter the \texttt{Site Name}, \texttt{Admin Email}, \texttt{Admin Username}, \texttt{Admin Password}, and \texttt{Confirm Admin Password}. Click ``$\Rightarrow$ Next" to move on to the database configuration.\\

\begin{figure}[h] 
	\centering
	\includegraphics[width=8cm]{j3databaseconfiguration.png}
	\caption{Joomla Database Configuration}
	\label{fig:j3databaseconfiguration}
\end{figure}

\noindent
Use the following values to complete the form, then click ``$\Rightarrow$ Next" to continue on to the finalization.\\
\\
\begin{tabular}{l l}
	\texttt{Database type} & MySQLi\\
	\texttt{Host Name} & localhost\\
	\texttt{Username} & root\\
	\texttt{Password} & (empty, unless set)\\
	\texttt{Database name} & j3 (unless named otherwise)\\
\end{tabular}

\newpage

\begin{figure}[h]
	\centering
	\includegraphics[width=10cm]{j3finalization.png}
	\caption{Joomla Finalization}
	\label{fig:j3finalization}
\end{figure}

\noindent
Here you can choose whether or not you wish to install sample data. Leave ``None" selected and click ``$\Rightarrow$ Install" to complete the installation. The installation will then show the progress of the database construction. When this is finished you will be told that Joomla! is installed. You should now press the orange button ``Remove installation folder" to complete the installation. You can choose to visit the frontend or backend of the site by clicking the appropriate button.
